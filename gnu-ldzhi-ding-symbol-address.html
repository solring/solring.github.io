
<!DOCTYPE html>
<html lang="chinese (traditional)">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="./theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="./theme/pygments/monokai.min.css">
  <link rel="stylesheet" type="text/css" href="./theme/font-awesome/css/font-awesome.min.css">


    <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Solring Lin Atom">





<meta name="author" content="Solring Lin" />
<meta name="description" content="(archive) GNU LD指定symbol address" />
<meta name="keywords" content="">

<meta property="og:site_name" content="Solring Lin"/>
<meta property="og:title" content="GNU LD指定symbol address"/>
<meta property="og:description" content="(archive) GNU LD指定symbol address"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="./gnu-ldzhi-ding-symbol-address.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2016-03-23 05:54:00+08:00"/>
<meta property="article:modified_time" content="2016-03-23 05:54:00+08:00"/>
<meta property="article:author" content="./author/solring-lin.html">
<meta property="article:section" content="Archive"/>
<meta property="og:image" content="images/profile.jpg">

  <title>Solring Lin &ndash; GNU LD指定symbol address</title>

</head>
<body>
  <aside>
    <div>
      <a href=".">
        <img src="images/profile.jpg" alt="SOLRING LIN" title="SOLRING LIN">
      </a>
      <h1><a href=".">SOLRING LIN</a></h1>

<p>Software Developer | Technical notes and everything</p>
      <nav>
        <ul class="list">

          <li><a href="/about.html" target="_blank">About</a></li>
          <li><a href="https://www.linkedin.com/in/sherry-lin-73312843/" target="_blank">Resume</a></li>
          <li><a href="#" target="_blank">sherry12714@gmail.com</a></li>
        </ul>
      </nav>

      <ul class="social">
        <li><a class="sc-github" href="http://github.com/solring" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-linkedin" href="https://www.linkedin.com/in/sherry-lin-73312843/" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        <li><a class="sc-twitter" href="http://twitter.com/solringlin" target="_blank"><i class="fa fa-twitter"></i></a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href=".">    Home
</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>

      <a href="/feeds/all.atom.xml">    Atom
</a>

    </nav>

<article class="single">
  <header>
      
    <h1 id="gnu-ldzhi-ding-symbol-address">GNU LD指定symbol address</h1>
    <p>
          Posted on 週三 23 三月 2016 in <a href="./category/archive.html">Archive</a>


    </p>
  </header>


  <div>
    <p>在Embedded System有時候會需要強制修改shared object用到的OS routine symbol address
讓他可以指到routine在image裡的位置</p>
<p>一樣是參考<a href="https://ftp.gnu.org/old-gnu/Manuals/ld-2.9.1/html_node/ld_3.html">手冊</a>，找到這個option:
<strong>--just-symbols=filename</strong></p>
<blockquote>
<p>Read symbol names and their addresses from filename, but do not relocate it or include it in the output. This allows your output file to refer symbolically to absolute locations of memory defined in other programs. You may use this option more than once. For compatibility with other ELF linkers, if the -R option is followed by a directory name, rather than a file name, it is treated as the -rpath option. </p>
</blockquote>
<p>.........但是你沒講filename是什麼東西啊 =皿=</p>
<p>後來在這找到<a href="http://stackoverflow.com/questions/495262/linking-symbols-to-fixed-addresses-on-linux">symbol file的format</a>:</p>
<div class="highlight"><pre><span></span>symbol1 = 0x12345678;
symbol2 = 0x23456789;
...
</pre></div>


<p>其中等號旁的空白是必須的，如果format不對的話ld會噴error說他看不懂</p>
<p>用了這個之後，link出來的symbol就會從UND變成ABS啦</p>
<p>當然也可以用<code>--defsym symbol=0x12345678</code>，但是symbol一多的時候還是用symbol file比較快</p>
  </div>
  <div class="tag-cloud">
    <p>
    </p>
  </div>





</article>

    <footer>
<p>&copy;  </p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Solring Lin ",
  "url" : ".",
  "image": "images/profile.jpg",
  "description": "Technical notes and everything."
}
</script>

</body>
</html>